= Sections Command =

* [[file:/home/basith/Pictures/objects_and_final_elf.png|Combining Object Files]]
* SECTIONS command is used to create different output sections in the final elf executable 
	generated. See this [[file:~/Pictures/linker_section_placement.png|memory picture]] and put sections accordingly. For example which section should 
	come first and which section should be second etc. In this case vector table is first then 
	text section then ro data section .....
* Important command by which you can instruct the linker how to merge the input sections to 
	yield an output section.
* This command also controls the order in which different output sections appear in the 
	elf file generated.
* By using this command, you also mention the placement of a section in a memory region. 
	For example, you instruct the linker to place the .text section in the FLASH memory 
	region, which is described by the MEMORY command.
* When writing section content think if the section(.text or any other) should be relocated?
* Syntax: 
  * [[file:/home/basith/Pictures/linker_section_syntax.png|Linker Section Syntax]]
		* .text --> .text section label is not relocatable. It remains in FLASH.
		* >(vma) AT> (lma) --> This statement gives address info to linker/locator where to place the 
			section(.text) in the memory(vma) and where to load this section from(lma). The addresses 
			are defined in MEMORY Section of the linker script.
			* virtual memory address(vma):
				* The defined section/label will be put in this memory address.
			* load memory address(lma):
				* The defined section/label will be loaded from this memory address.
		* .data --> .data section label is relocatable. It should be copied from FLASH to SRAM.
  * [[file:/home/basith/Pictures/linker_section_syntax_example.png|Linker Section Example]]
	* The above example is not yet complete. I will make some changes in section block.

= Location Counter =

* This is a special linker symbol denoted by a dot '.'.
* This symbol is called "location counter" since linker automatically updates symbol with location 
	(address) information.
* You can use this symbol inside linker script to track and define boundaries of various sections.
* You can also set location counter to any specific value while writing linker script.
* Location counter should appear only inside the SECTIONS command.
* The location counter is then incremented by the size of the output section.

== Linker Script Symbol ==

To understand location counter we need to know some information presented here.

* A symbol is the name of an address. Symbols can be seen using nm tool, objdump tool etc.
* A symbol declaration is not equivalent to a variable declaration what you do in your "C" 
  application.
* See this [[file:~/Pictures/simple_symbol_table.png|simple symbol table.]]
* We will use symbols(again its not variable) to capture the boundary addresses. Symbols are 
	generated by the compiler and used by the linker(ld).
* We will capture boundaries by using location counter(dot). We can write symbols in linker 
	script to capture boundary addresses. See this [[file:~/Pictures/boundary_symbols.png|boundary symbol image.]]
* See this [[file:~/Pictures/linker_script_picture.png|linker script picture]] and [[file:~/Pictures/final_elf_generated.png|final elf file pic.]]
* Create symbols in linker script to track the starting and ending addresses of the sections. 
	Since .data needs to be moved to SRAM track its starting and ending address. See this [[file:~/Pictures/copying_data_to_sram.png|image]].
* Location counter always tracks VMA not LMA.
